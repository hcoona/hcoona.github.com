<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="CE2QArf5fjsQPPRbfXjtRJhVX-T6HZ1lVgKfTFby_3A">
  <meta name="baidu-site-verification" content="code-MbGHohQ17H">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui@5.0.31/dist/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hcoona.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.24.1","exturl":false,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/config.js" defer=""></script>

    <meta name="description" content="Percolator[1]在基于Bigtable[2]系统，在不改变Bigtable自身实现的前提下，通过行级事务和多版本控制，实现了Snapshot Isolation级别的跨行事务。此外，论文还描述了一种基于Bigtable实现的可靠的消息通知机制。   比较有特色的是，Percolator在实现上述2个功能时，并没有侵入去改变Bigtable的实现，而是在Bigtable外围通过包装去实现">
<meta property="og:type" content="article">
<meta property="og:title" content="论文笔记：[OSDI'10] Large-scale Incremental Processing Using Distributed Transactions and Notifications">
<meta property="og:url" content="https://hcoona.github.io/Paper-Note/percolator/index.html">
<meta property="og:site_name" content="HCOONa's blog">
<meta property="og:description" content="Percolator[1]在基于Bigtable[2]系统，在不改变Bigtable自身实现的前提下，通过行级事务和多版本控制，实现了Snapshot Isolation级别的跨行事务。此外，论文还描述了一种基于Bigtable实现的可靠的消息通知机制。   比较有特色的是，Percolator在实现上述2个功能时，并没有侵入去改变Bigtable的实现，而是在Bigtable外围通过包装去实现">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hcoona.github.io/images/bigtable-data-model.png">
<meta property="article:published_time" content="2019-06-09T07:46:15.000Z">
<meta property="article:modified_time" content="2025-08-28T05:15:47.304Z">
<meta property="article:author" content="Shuai Zhang">
<meta property="article:tag" content="Distributed System">
<meta property="article:tag" content="Paper Note">
<meta property="article:tag" content="Distributed Storage">
<meta property="article:tag" content="Google">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hcoona.github.io/images/bigtable-data-model.png">


<link rel="canonical" href="https://hcoona.github.io/Paper-Note/percolator/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://hcoona.github.io/Paper-Note/percolator/","path":"Paper-Note/percolator/","title":"论文笔记：[OSDI'10] Large-scale Incremental Processing Using Distributed Transactions and Notifications"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>论文笔记：[OSDI'10] Large-scale Incremental Processing Using Distributed Transactions and Notifications | HCOONa's blog</title>
  
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FC1VDVXMFD"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-FC1VDVXMFD","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/third-party/analytics/google-analytics.js" defer=""></script>




  <script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "lk3wjeo70z");
</script>




  
  <script src="https://unpkg.com/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer=""></script>
  <script src="https://unpkg.com/@next-theme/pjax@0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous" defer=""></script>
  <script src="https://unpkg.com/@fancyapps/ui@5.0.31/dist/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous" defer=""></script>
  <script src="https://unpkg.com/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous" defer=""></script>
  <script src="https://unpkg.com/pangu@7.2.0/dist/browser/pangu.umd.js" integrity="sha256-JnmRRnJK7DC6RQJbAJb6AXOM9OmWzS6z8eYultk/48Y=" crossorigin="anonymous" defer=""></script>
<script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/utils.js" defer=""></script><script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/motion.js" defer=""></script><script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/sidebar.js" defer=""></script><script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/next-boot.js" defer=""></script><script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/pjax.js" defer=""></script>

  
  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://unpkg.com/pdfobject@2.3.1/pdfobject.min.js","integrity":"sha256-jI72I8ZLVflVOisZIOaLvRew3tyvzeu6aZXFm7P7dEo="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/third-party/tags/pdf.js" defer=""></script>



  <script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/third-party/fancybox.js" defer=""></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://unpkg.com/mathjax@3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/third-party/math/mathjax.js" defer=""></script>


  <script src="https://unpkg.com/quicklink@3.0.1/dist/quicklink.umd.js" integrity="sha256-44BednzIpUeQJcY8qtLyarFu0UCCTbgmWOvaoehiFQQ=" crossorigin="anonymous" defer=""></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":false,"delay":true,"timeout":3000,"priority":true,"url":"https://hcoona.github.io/Paper-Note/percolator/"}</script>
  <script src="https://unpkg.com/hexo-theme-next@8.24.1/source/js/third-party/quicklink.js" defer=""></script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="HCOONa's blog" type="application/atom+xml">
<link rel="alternate" href="/rss.xml" title="HCOONa's blog" type="application/rss+xml">
</head>

<body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">HCOONa's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#_%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86"><span class="nav-number">1.</span> <span class="nav-text">预备知识</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#_bigtable%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E5%92%8C%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81"><span class="nav-number">1.1.</span> <span class="nav-text">Bigtable的数据模型和事务支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_snapshot_isolation%E7%AE%80%E4%BB%8B"><span class="nav-number">1.2.</span> <span class="nav-text">Snapshot Isolation简介</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#_percolator%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%B7%A8%E8%A1%8C%E4%BA%8B%E5%8A%A1%E7%9A%84"><span class="nav-number">2.</span> <span class="nav-text">Percolator是如何实现跨行事务的</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#_%E4%B8%BB%E8%A6%81%E6%B5%81%E7%A8%8B"><span class="nav-number">2.1.</span> <span class="nav-text">主要流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_%E9%94%99%E8%AF%AF%E6%81%A2%E5%A4%8D"><span class="nav-number">2.2.</span> <span class="nav-text">错误恢复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_%E5%85%B6%E4%BB%96%E4%BC%98%E5%8C%96"><span class="nav-number">2.3.</span> <span class="nav-text">其他优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_%E6%80%A7%E8%83%BD%E6%AF%94%E8%BE%83"><span class="nav-number">2.4.</span> <span class="nav-text">性能比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#_%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="nav-number">2.5.</span> <span class="nav-text">优缺点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#_references"><span class="nav-number">3.</span> <span class="nav-text">References</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Shuai Zhang" src="//www.gravatar.com/avatar/80d20dde8a29396d8ec78af0289a3e88">
  <p class="site-author-name" itemprop="name">Shuai Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hcoona/" title="GitHub → https://github.com/hcoona/" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://www.zhihu.com/people/zhangshuai89" title="ZhiHu → http://www.zhihu.com/people/zhangshuai89" rel="noopener me" target="_blank"><i class="fab fa-zhihu fa-fw"></i>ZhiHu</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://unpkg.com/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_nd.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="zh-CN" data-clarity-region="article">
    <link itemprop="mainEntityOfPage" href="https://hcoona.github.io/Paper-Note/percolator/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="//www.gravatar.com/avatar/80d20dde8a29396d8ec78af0289a3e88">
      <meta itemprop="name" content="Shuai Zhang">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HCOONa's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="论文笔记：[OSDI'10] Large-scale Incremental Processing Using Distributed Transactions and Notifications | HCOONa's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          论文笔记：[OSDI'10] Large-scale Incremental Processing Using Distributed Transactions and Notifications
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-06-09 15:46:15" itemprop="dateCreated datePublished" datetime="2019-06-09T15:46:15+08:00">2019-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-08-28 13:15:47" itemprop="dateModified" datetime="2025-08-28T13:15:47+08:00">2025-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/Paper-Note/" itemprop="url" rel="index"><span itemprop="name">Paper Note</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><div class="paragraph">
<p>Percolator<a href="#percolator">[1]</a>在基于Bigtable<a href="#bigtable">[2]</a>系统，在不改变Bigtable自身实现的前提下，通过行级事务和多版本控制，实现了Snapshot Isolation级别的跨行事务。此外，论文还描述了一种基于Bigtable实现的可靠的消息通知机制。</p>
</div>
<div class="paragraph">
<p>比较有特色的是，Percolator在实现上述2个功能时，并没有侵入去改变Bigtable的实现，而是在Bigtable外围通过包装去实现，这在有些情况下是一种非常方便的做法，但是一般会带来性能损失。</p>
</div>
<div class="paragraph">
<p><span id="more"></span></p>
</div>
<div class="paragraph">
<p>本文只叙述Percolator事务相关的部分。</p>
</div>
<div class="sect1">
<h2 id="_预备知识">预备知识</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bigtable的数据模型和事务支持">Bigtable的数据模型和事务支持</h3>
<div class="paragraph">
<p>我们先回顾一下Bigtable的数据模型：</p>
</div>
<div class="imageblock">
<div class="content">
<img data-src="/images/bigtable-data-model.png" alt="Bigtable data model">
</div>
</div>
<div class="paragraph">
<p>如上图所示，数据可以由以下层级关系确定：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>row name，例如 <code>com.cnn.www</code></p>
</li>
<li>
<p>column families，例如 <code>anchor</code></p>
</li>
<li>
<p>column，例如 <code>contents:</code> 和 <code>anchor:cnnsi.com</code></p>
</li>
<li>
<p>timestamp，例如 $t_3$，$t_5$ 和 $t_6$</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Bigtable支持行级事务，尽管在<a href="#bigtable">[2]</a>中没有明说是什么样的事务隔离性级别，但是从<a href="#percolator">[1]</a>对于Primary加锁的相关叙述中可以推测出应该是Serialisability级别的。</p>
</div>
</div>
<div class="sect2">
<h3 id="_snapshot_isolation简介">Snapshot Isolation简介</h3>
<div class="paragraph">
<p>在<a href="#critique-sql-isolation">[3]</a>中非形式化的描述了Snapshot Isolation。简单而言，一次Snapshot Isolation的Transaction具有2个重要的时间结点：Start-Timestamp和Commit-Timestamp。在整个Transaction开始时，也即Start-Timestamp，对整个系统中的数据取快照，在Transaction进行过程中读取的所有数据，以及写入的所有变更都来自于这个快照。如果在提交时，也即Commit-Timestamp，发现有其他Transaction已经提交了，则Abort，否则成功。</p>
</div>
<div class="paragraph">
<p>在<a href="#weak-consistency">[4]</a><a href="#seeing-is-believing">[5]</a>和<a href="#consistency-models">[6]</a>中有关于Snapshot Isolation的形式化表述。</p>
</div>
<div class="paragraph">
<p>Snapshot Isolation相关展开的话题比较多，包括以下几个主要方面：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>提升隔离性：One-copy Snapshot Isolation，Serializable Snapshot Isolation</p>
</li>
<li>
<p>各种变种和优化</p>
</li>
<li>
<p>和新硬件的结合优化</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>相关话题见：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/54979396">Snapshot Isolation综述</a>，<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/67077901">论文笔记：[CONCUR'15] A Framework for Transactional Consistency Models with Atomic Visibility</a> 和 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/37076900">CAP，ACID，我们能做什么</a>。</p>
</div>
<div class="paragraph">
<p>P.S. Postgres中MVCC的实现见<a href="#mvcc-unmasked">[10]</a>。<a href="#critique-sql-isolation">[3]</a>提到了Snapshot Isolation是对于<a href="#mvcc-bhg">[7]</a>中Multiversion Mixed Method的一种扩展。但是Snapshot Isolation也可以用其他方式实现，例如<a href="#semantics-snapshot-isolation">[11]</a>中提供了使用读写锁实现Snapshot Isolation的方法。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_percolator是如何实现跨行事务的">Percolator是如何实现跨行事务的</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Percolator依赖于底层BigTable实现Multi-version和行级事务，在此基础上实现了跨行事务。</p>
</div>
<div class="sect2">
<h3 id="_主要流程">主要流程</h3>
<div class="paragraph">
<p>假设存在一个Timestamp Oracle Service可以提供单调递增的时戳。Bigtable Transaction提供行内强一致性级别事务。Bigtable使用Timestamp Oracle Service提供的时戳作为cell的版本号。我们基于上述设施介绍如何实现Percolator Transaction。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>当Percolator Transaction开始时，取得一个时戳Start-Timestamp</p>
</li>
<li>
<p>进入读阶段</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>当发起读请求时，总是取得Start-Timestamp之前最后一次Committed的版本的值</p>
</li>
<li>
<p>当发起写请求时，总是将写请求缓存到本地</p>
</li>
</ol>
</div>
</li>
<li>
<p>当Percolator Transaction提交时</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>进入加锁阶段，对所有被写请求影响的cell加锁（通过写一个特殊的cell）</p>
</li>
<li>
<p>取得一个时戳Commit-Timestamp</p>
</li>
<li>
<p>进入提交阶段，以Commit-Timestamp作为写版本，将缓存在本地的写请求Flush到远程并去除受影响的cell上的锁</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>以上过程中，无论是读请求还是写请求，都需要Bigtable行级事务的支持。</p>
</div>
<div class="paragraph">
<p>由于BigTable并不支持真正的行级锁，这里锁的实现方式是使用一个特殊的列：<code>c:lock</code>（这里 <code>:</code> 比较容易引起歧义，在BigTable中使用 <code>:</code> 分割 ColumnFamily 和 ColumnName，可以认为这里使用了另一个特殊符号进行分割，例如： <code>cf:cn+lock</code>）。这样的话，原来的数据也需要相应变化一下，约定使用列 <code>c:data</code> 存储真实数据（的不同版本）。由于我们想要支持跨行事务，最终Percolator事务提交的时候，我们还需要一个特殊的列来标记 Committed：<code>c:write</code>。</p>
</div>
<div class="paragraph">
<p>Percolator还进行了一些变化，以避免为每一个Percolator事务分配唯一标识。通过（任意）指定一个write请求的cell在加锁时，这个锁是Primary的，事务中的其他Lock都是Secondary Lock，并且指向这个Primary Lock。这个设计相当于用Primary Lock唯一标志这个Percolator事务，使用BigTable可靠的记录（追踪）了整个事务，这个记录可以用于错误恢复时读取整个事务的状态。</p>
</div>
<div class="paragraph">
<p>Percolator的具体算法参考原论文，下面讲解一下论文中给出的例子。</p>
</div>
<table id="table-1" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Initial State</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">bal:data</th>
<th class="tableblock halign-left valign-top">bal:lock</th>
<th class="tableblock halign-left valign-top">bal:write</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Bob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Joe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>如<a href="#table-1">Table 1</a>所示，初始状态中存有2行数据：Bob和Joe。他们最后一次Committed的Version都是5，他们现在都没有被加锁。观察其数据列，得到他们现在的状态：Bob有\$10，Joe有\$2。假设读取的Cell的版本区间上存在“有效”的锁（“有效”见后面错误恢复），则需要等待锁释放后再读取。</p>
</div>
<div class="paragraph">
<p>现在Bob想要转账\$7给Joe，所有的读取请求无需加锁，直接按照当前时间的快照进行查询，即读到了<a href="#table-1">Table 1</a>中的状态：Bob有\$10，Joe有\$2。此时判定可以进行转账操作，于是开始进行写入。所有的写请求都会先Buffer到本地，等到提交阶段再进行，这样可以保证在提交阶段时知道所有需要加锁的Cell。转账操作需要分别影响Bob的bal和Joe的bal。</p>
</div>
<div class="paragraph">
<p>假设我们总是将第一次写操作影响的Cell认为是Primary Lock Object，首先从Bob的账户中减去\$7，则第一次写入可以同时做加Primary Lock和记录写请求的工作，如<a href="#table-2">Table 2</a>所示。</p>
</div>
<div class="paragraph">
<p>加锁时有2种情况会导致加锁失败：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在Transaction开始后，已经有其他人提交了其他的Transaction，并且也写入了这一Cell（意味着Write-Write冲突）</p>
</li>
<li>
<p>别人已经在这个Cell上加锁了，并且这个锁此时仍然是“有效”（“有效”见后面错误恢复）的（意味着Percolator Transaction是Non-blocking的）</p>
</li>
</ol>
</div>
<table id="table-2" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. The transfer transaction begins by locking Bob’s account</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">bal:data</th>
<th class="tableblock halign-left valign-top">bal:lock</th>
<th class="tableblock halign-left valign-top">bal:write</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock">Bob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: $3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: I am primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Joe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Primary lock成功后，接下来的所有写操作都需要加锁，并且将锁指向Primary Lock以供错误检测和恢复使用。</p>
</div>
<table id="table-3" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. The transaction now locks Joe’s account and writes Joe’s new balance</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">bal:data</th>
<th class="tableblock halign-left valign-top">bal:lock</th>
<th class="tableblock halign-left valign-top">bal:write</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock">Bob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: $3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: I am primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock">Joe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: $9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: primary @ Bob.bal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>如果所有写入请求加锁成功，那么就可以进入提交阶段。提交时首先提交Primary Lock锁住的内容，见<a href="#table-4">The transaction has now reached the commit point</a>。</p>
</div>
<table id="table-4" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. The transaction has now reached the commit point</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">bal:data</th>
<th class="tableblock halign-left valign-top">bal:lock</th>
<th class="tableblock halign-left valign-top">bal:write</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock">Bob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8: data @ 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: $3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock">Joe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: $9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: primary @ Bob.bal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>然后再提交其他Lock锁住的内容：</p>
</div>
<table id="table-5" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. The transaction completes by adding write records and deleting locks at the secondary cells</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">bal:data</th>
<th class="tableblock halign-left valign-top">bal:lock</th>
<th class="tableblock halign-left valign-top">bal:write</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock">Bob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8: data @ 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: $3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="4"><p class="tableblock">Joe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8: data @ 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: $9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7: primary @ Bob.bal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6: data @ 5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5: $2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5:</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_错误恢复">错误恢复</h3>
<div class="paragraph">
<p>Percolator相当于使用Client进行Coordinate，但是将所有需要的数据都（通过Embed的方式）Persist到Bigtable中了，因此只要能够检测到Failure，就有足够的信息进行恢复。这里的难点在于如何确定另一个Client真的Fail了，并且这个Client还得必须是Fail-Stop模型的（例如一个Client仅仅是慢，但是被别人认定为Fail了，此时这个Client必须得自行Stop）。Percolator Worker（也就是上面提到的Client），基于Chubby服务<a href="#chubby">[12]</a>进行Lease-Reclaim来保证上述提到的Failure detect和Fence机制。</p>
</div>
<div class="paragraph">
<p>剩下的问题就比较简单了，根据Primary Lock的情况分为2种：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>如果Primary Lock已经Committed了，则需要继续Rollout这个Transaction，将所有发现的Cell都提交</p>
</li>
<li>
<p>如果Primary Lock还没有Commit，则需要将这个Transaction Rollback，将所有发现的Cell都Rollback</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>论文中没有提到具体怎么发现这些受影响的Cell，推测可能的方法有：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>在Get数据时Lazily的检测是否需要Rollout/Rollback这个Cell（这个是必须处理的情况）</p>
</li>
<li>
<p>将Transaction影响到的Cell记录到某个地方（由于在加Primary Lock的时候已经知道都有哪些Cell需要加锁了，所以这个方法是可行的）</p>
</li>
<li>
<p>定期进行全表扫描回收</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_其他优化">其他优化</h3>
<div class="paragraph">
<p>由于需要保证Timestamp是全序递增的，Timestamp oracle一般采用集中式的方案，因此可能会成为性能瓶颈，需要特别的优化。</p>
</div>
<div class="paragraph">
<p>Percolator中Timestamp oracle采用预分配的方式，直接分配出一批timestamp，并且将其中最大的一个持久化到可靠存储中。这种预分配的方式可以使得接下来一段时间内的分配都只需要进行内存访问；如果发生重启，则直接从可靠存储中读取最大的一个可能已经分配的Timestamp继续分配即可。</p>
</div>
<div class="paragraph">
<p>为了节约通信开销，Percolator Worker通过Batching聚合的方式从Timestamp oracle分配一批Timestamp。</p>
</div>
</div>
<div class="sect2">
<h3 id="_性能比较">性能比较</h3>
<div class="paragraph">
<p>Percolator Transaction在不考虑重试和错误处理的情况下</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>每次读请求需要读</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>基础的Version Range</p>
</li>
<li>
<p>有可能存在的锁</p>
</li>
<li>
<p>锁指向的Primary Lock</p>
</li>
</ol>
</div>
</li>
<li>
<p>每次写请求需要</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>读write是否有新提交（Write-Write冲突）</p>
</li>
<li>
<p>读lock是否有锁冲突</p>
</li>
<li>
<p>写数据更新和锁</p>
</li>
<li>
<p>提交</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>可见读写放大还是比较严重的。Percolator和裸Bigtable性能对比如论文中<a href="#figure-8">Figure 8</a>所示：</p>
</div>
<table id="figure-8" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. The overhead of Percolator operations relative to Bigtable</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Bigtable</th>
<th class="tableblock halign-left valign-top">Percolator</th>
<th class="tableblock halign-left valign-top">Relative</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read/s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15513</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14590</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.94</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Write/s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7232</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.23</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_优缺点">优缺点</h3>
<div class="paragraph">
<p>个人认为，Percolator的优点在于非侵入式的给一个支持Multi-version和行级事务的存储系统增加了多行（多表）事务的能力；缺点在于</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>需要业务修改表结构</p>
</li>
<li>
<p>性能比较低</p>
</li>
<li>
<p>不能有非Transaction的写入和Transaction有任何读/写冲突</p>
</li>
<li>
<p>错误恢复比较复杂</p>
</li>
<li>
<p>Timestamp Oracle可能单点失效</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="percolator"></a>[1] PENG D, DABEK F. Large-scale Incremental Processing Using Distributed Transactions and Notifications[J]. OSDI’10, 2010, 2006: 1–15.</p>
</li>
<li>
<p><a id="bigtable"></a>[2] CHANG F, DEAN J, GHEMAWAT S, et al. Bigtable: A distributed storage system for structured data[J]. 7th Symposium on Operating Systems Design and Implementation (OSDI ’06), November 6-8, Seattle, WA, USA, 2006: 205–218.</p>
</li>
<li>
<p><a id="critique-sql-isolation"></a>[3] BERENSON H, BERNSTEIN P, GRAY J, et al. A critique of ANSI SQL isolation levels[J]. ACM SIGMOD Record, 1995, 24(2): 1–10.</p>
</li>
<li>
<p><a id="weak-consistency"></a>[4] ADYA A. Weak Consistency: A Generalized Theory and Optimistic Implementations for Distributed Transactions[J]. 1999: 198.</p>
</li>
<li>
<p><a id="seeing-is-believing"></a>[5] CROOKS N, PU Y, ALVISI L, et al. Seeing is Believing: A Client-Centric Specification of Database Isolation[J]. Podc, 2017(June): 73–82.</p>
</li>
<li>
<p><a id="consistency-models"></a>[6] CERONE A, BERNARDI G, GOTSMAN A. A Framework for Transactional Consistency Models with Atomic Visibility[J]. 26th International Conference on Concurrency Theory, {CONCUR} 2015, Madrid, Spain, September 1.4, 2015, 2015, 42(Concur): 58–71.</p>
</li>
<li>
<p><a id="mvcc-bhg"></a>[7] BERNSTEIN P A, GOODMAN N. Concurrency Control in Distributed Database Systems[J]. ACM Computing Surveys, 1981, 13(2): 185–221.
较早的mvcc总结</p>
</li>
<li>
<p><a id="mvcc-book"></a>[8] BERNSTEIN P A, GOODMAN N, HADZILACOS V. Concurrency Control and Recovery in Database Systems[M]. ACM Transactions on Database Systems, Addison-Wesley Pub. Co, 1987.
mvcc的书</p>
</li>
<li>
<p><a id="mvcc-evaluation"></a>[9] WU Y, ARULRAJ J, LIN J, et al. An empirical evaluation of in-memory multi-version concurrency control[J]. Proceedings of the VLDB Endowment, VLDB Endowment, 2017, 10(7): 781–792.</p>
</li>
<li>
<p><a id="mvcc-unmasked"></a>[10] MOMJIAN B. MVCC Unmasked[EB/OL]. (2019). <a target="_blank" rel="noopener" href="http://momjian.us/main/writings/pgsql/mvcc.pdf" class="bare">http://momjian.us/main/writings/pgsql/mvcc.pdf</a>.</p>
</li>
<li>
<p><a id="semantics-snapshot-isolation"></a>[11]Raad, A., Lahav, O., &amp; Vafeiadis, V. (2019). On the Semantics of Snapshot Isolation. In Logic Programming (Vol. 1, pp. 1–23). Springer International Publishing. <a target="_blank" rel="noopener" href="https://doi.org/10.1007/978-3-030-11245-5_1" class="bare">https://doi.org/10.1007/978-3-030-11245-5_1</a></p>
</li>
<li>
<p><a id="chubby"></a>[12] BURROWS M. The Chubby lock service for loosely-coupled distributed systems[J]. OSDI ’06: Proceedings of the 7th symposium on Operating systems design and implementation SE - OSDI ’06, 2006: 335–350.</p>
</li>
</ul>
</div>
</div>
</div>
    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Shuai Zhang
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://hcoona.github.io/Paper-Note/percolator/" title="论文笔记：[OSDI'10] Large-scale Incremental Processing Using Distributed Transactions and Notifications">https://hcoona.github.io/Paper-Note/percolator/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-ND</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Distributed-System/" rel="tag"># Distributed System</a>
              <a href="/tags/Paper-Note/" rel="tag"># Paper Note</a>
              <a href="/tags/Distributed-Storage/" rel="tag"># Distributed Storage</a>
              <a href="/tags/Google/" rel="tag"># Google</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Paper-Note/transactional-consistency-models/" rel="prev" title="论文笔记：[CONCUR'15] A Framework for Transactional Consistency Models with Atomic Visibility">
                  <i class="fa fa-angle-left"></i> 论文笔记：[CONCUR'15] A Framework for Transactional Consistency Models with Atomic Visibility
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Paper-Note/architecture-of-a-database-system/" rel="next" title="论文笔记：[FTNDB'07] Architecture of a Database System">
                  论文笔记：[FTNDB'07] Architecture of a Database System <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    © 2011 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Shuai Zhang</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> &amp; <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>



</body></html>